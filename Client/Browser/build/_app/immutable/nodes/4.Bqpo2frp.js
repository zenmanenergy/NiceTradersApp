import{f as k,a as y,b as ye}from"../chunks/Cunh0d-7.js";import{i as qs}from"../chunks/oo_yk0cj.js";import{o as hs}from"../chunks/C2rPQd7x.js";import{al as us,t as N,i as e,ak as P,am as fs,aq as _s,an as a,ap as o,ar as ys,ao as s,as as I,at as x,W as C,aj as G,au as bs}from"../chunks/BDZjGMj5.js";import{e as f,s as q}from"../chunks/klik1TuH.js";import{e as he,i as ue}from"../chunks/Dl_Jj4LQ.js";import{i as j}from"../chunks/Ko-oeFjF.js";import{h as xs}from"../chunks/HfA2L_hR.js";import{r as S}from"../chunks/D7v9Epbb.js";import{S as M,b as U,a as V,s as fe,c as B}from"../chunks/vbtHKNFL.js";import{g as E}from"../chunks/SwMl67WK.js";class ws{SessionId="";UserType="";async logout(){console.log("Handling logout..."),Cookies.remove("SessionId"),Cookies.remove("UserType"),window.location.href="/login"}async handleSession(){console.log("Handling session..."),this.GetSessionId(),await this.VerifySession(c=>{c&&c.SessionId&&c.UserType?(console.log("Session verified!",c),Cookies.set("SessionId",c.SessionId,{expires:365}),Cookies.set("UserType",c.UserType,{expires:365}),this.UserType=c.UserType):this.logout()})}async VerifySession(c){const n={SessionId:this.SessionId},m=Object.keys(n).map(d=>d+"="+encodeURIComponent(n[d])).join("&"),l=U+"/Login/Verify?"+m;console.log(l);try{const d=await M(`${U}/Login/Verify`,n);d&&d.SessionId&&d.UserType?c(d):c(null)}catch(d){console.error("Verify session error:",d),c(null)}}GetSessionId(){const c=new URLSearchParams(window.location.search);return c.get("SessionId")?this.SessionId=c.get("SessionId"):Cookies.get("SessionId")?this.SessionId=Cookies.get("SessionId"):(this.SessionId="",Cookies.set("previousLocation",location.href),location.href="/login"),!0}}const _e=new ws;async function Ss(_,c){const n={SessionId:_},m=U+"/Profile/GetProfile?";let l=await M(m,n,!0);c(l)}async function ks(_,c,n,m,l,d,v){const R={SessionId:_,name:c,email:n,phone:m,location:l,bio:d},H=U+"/Profile/UpdateProfile?";let J=await M(H,R,!0);v(J)}async function Is(_,c){const n={SessionId:_},m=U+"/Profile/GetExchangeHistory?";let l=await M(m,n,!0);c(l)}async function Cs(_,c,n){const m={SessionId:_,settingsJson:c},l=U+"/Profile/UpdateSettings?";let d=await M(l,m,!0);n(d)}async function Es(_,c){const n={SessionId:_},m=U+"/Profile/DeleteAccount?";let l=await M(m,n,!0);c(l)}var Us=k('<meta name="description" content="Manage your NICE Traders profile and settings"/>'),Ds=ye('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"></polyline></svg>'),Ps=ye('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>'),Ms=ye('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"></polyline></svg>'),Ls=k('<input type="text" class="edit-input name-input svelte-maq4gq" placeholder="Full Name"/> <textarea class="edit-textarea svelte-maq4gq" placeholder="Tell others about yourself..." rows="3"></textarea> <input type="text" class="edit-input svelte-maq4gq" placeholder="Location"/> <div class="edit-actions svelte-maq4gq"><button class="save-button svelte-maq4gq">Save Changes</button> <button class="cancel-button svelte-maq4gq">Cancel</button></div>',1),Ts=k('<h2 class="user-name svelte-maq4gq"> </h2> <p class="user-bio svelte-maq4gq"> </p> <div class="user-details svelte-maq4gq"><div class="detail-item svelte-maq4gq"><span class="detail-icon">üìç</span> <span class="detail-text"> </span></div> <div class="detail-item svelte-maq4gq"><span class="detail-icon">üìÖ</span> <span class="detail-text"> </span></div></div>',1),As=k("<span>‚≠ê</span>"),Ns=k('<div class="contact-item svelte-maq4gq"><span class="contact-label svelte-maq4gq">Email</span> <input type="email" class="edit-input svelte-maq4gq" placeholder="Email address"/></div> <div class="contact-item svelte-maq4gq"><span class="contact-label svelte-maq4gq">Phone</span> <input type="tel" class="edit-input svelte-maq4gq" placeholder="Phone number"/></div>',1),Vs=k('<div class="contact-item svelte-maq4gq"><span class="contact-label svelte-maq4gq">Email</span> <span class="contact-value svelte-maq4gq"> </span></div> <div class="contact-item svelte-maq4gq"><span class="contact-label svelte-maq4gq">Phone</span> <span class="contact-value svelte-maq4gq"> </span></div>',1),Bs=k("<span>‚≠ê</span>"),Hs=k('<div class="history-item svelte-maq4gq"><div class="history-info"><div class="history-header svelte-maq4gq"><span class="currency-badge svelte-maq4gq"> </span> <span> </span></div> <div class="history-amount svelte-maq4gq"> </div> <div class="history-details svelte-maq4gq"><span class="partner-name"> </span> <span class="exchange-date"> </span></div> <div class="history-rating svelte-maq4gq"></div></div> <div class="history-arrow svelte-maq4gq"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"></polyline></svg></div></div>'),Fs=k('<main class="profile-container svelte-maq4gq"><div class="header svelte-maq4gq"><button class="back-button svelte-maq4gq"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"></polyline></svg></button> <h1 class="page-title svelte-maq4gq">Profile</h1> <button class="edit-button svelte-maq4gq"><!></button></div> <div class="content svelte-maq4gq"><section class="user-profile svelte-maq4gq"><div class="avatar-section svelte-maq4gq"><div class="avatar large svelte-maq4gq"> </div> <div class="verification-badge svelte-maq4gq"><!></div></div> <div class="user-info"><!></div></section> <section class="stats-section svelte-maq4gq"><h3 class="section-title svelte-maq4gq">Exchange Stats</h3> <div class="stats-grid svelte-maq4gq"><div class="stat-card svelte-maq4gq"><div class="stat-number svelte-maq4gq"> </div> <div class="stat-label svelte-maq4gq">Rating</div> <div class="stat-stars svelte-maq4gq"></div></div> <div class="stat-card svelte-maq4gq"><div class="stat-number svelte-maq4gq"> </div> <div class="stat-label svelte-maq4gq">Total Exchanges</div></div> <div class="stat-card svelte-maq4gq"><div class="stat-number svelte-maq4gq"> </div> <div class="stat-label svelte-maq4gq">Success Rate</div></div></div></section> <section class="history-section svelte-maq4gq"><button class="view-history-btn svelte-maq4gq"><div class="btn-icon svelte-maq4gq">üìä</div> <div class="btn-content svelte-maq4gq"><span class="btn-title svelte-maq4gq">View Exchange History</span> <span class="btn-subtitle svelte-maq4gq">See all your past exchanges</span></div> <div class="btn-arrow svelte-maq4gq"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"></polyline></svg></div></button></section> <section class="contact-section svelte-maq4gq"><h3 class="section-title svelte-maq4gq">Contact Information</h3> <div class="contact-info svelte-maq4gq"><!></div></section> <section class="settings-section svelte-maq4gq"><h3 class="section-title svelte-maq4gq">Settings</h3> <div class="settings-group svelte-maq4gq"><h4 class="settings-group-title svelte-maq4gq">Notifications</h4> <div class="setting-item svelte-maq4gq"><span class="setting-label svelte-maq4gq">New Messages</span> <label class="toggle svelte-maq4gq"><input type="checkbox" class="svelte-maq4gq"/> <span class="toggle-slider svelte-maq4gq"></span></label></div> <div class="setting-item svelte-maq4gq"><span class="setting-label svelte-maq4gq">Exchange Updates</span> <label class="toggle svelte-maq4gq"><input type="checkbox" class="svelte-maq4gq"/> <span class="toggle-slider svelte-maq4gq"></span></label></div> <div class="setting-item svelte-maq4gq"><span class="setting-label svelte-maq4gq">Push Notifications</span> <label class="toggle svelte-maq4gq"><input type="checkbox" class="svelte-maq4gq"/> <span class="toggle-slider svelte-maq4gq"></span></label></div></div> <div class="settings-group svelte-maq4gq"><h4 class="settings-group-title svelte-maq4gq">Privacy</h4> <div class="setting-item svelte-maq4gq"><span class="setting-label svelte-maq4gq">Show Location</span> <label class="toggle svelte-maq4gq"><input type="checkbox" class="svelte-maq4gq"/> <span class="toggle-slider svelte-maq4gq"></span></label></div> <div class="setting-item svelte-maq4gq"><span class="setting-label svelte-maq4gq">Allow Direct Messages</span> <label class="toggle svelte-maq4gq"><input type="checkbox" class="svelte-maq4gq"/> <span class="toggle-slider svelte-maq4gq"></span></label></div></div></section> <section class="history-section svelte-maq4gq"><div class="section-header svelte-maq4gq"><h3 class="section-title svelte-maq4gq">Recent Exchanges</h3> <button class="view-all-link svelte-maq4gq">View All</button></div> <div class="history-list svelte-maq4gq"></div></section> <section class="account-actions svelte-maq4gq"><button class="action-button logout svelte-maq4gq"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16,17 21,12 16,7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> Logout</button> <button class="action-button delete svelte-maq4gq"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3,6 5,6 21,6"></polyline><path d="M19,6v14a2 2 0 0 1-2,2H7a2 2 0 0 1-2-2V6m3,0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2,2v2"></path></svg> Delete Account</button></section></div></main>');function Zs(_,c){us(c,!1);let n=N({name:"John Doe",email:"john.doe@email.com",phone:"+1 (555) 123-4567",joinDate:"October 15, 2025",rating:4.8,totalExchanges:12,completedExchanges:11,verificationStatus:"verified",location:"San Francisco, CA",bio:"Frequent traveler who loves helping others with currency exchanges. Always meet in safe public places!"}),m=N([{id:1,date:"2025-11-10",currency:"EUR",amount:250,partner:"Sarah Martinez",rating:5,type:"sold",status:"completed"},{id:2,date:"2025-11-05",currency:"GBP",amount:180,partner:"Mike Johnson",rating:5,type:"bought",status:"completed"},{id:3,date:"2025-10-28",currency:"JPY",amount:15e3,partner:"Lisa Chen",rating:4,type:"sold",status:"completed"},{id:4,date:"2025-10-20",currency:"CAD",amount:200,partner:"David Wilson",rating:5,type:"bought",status:"completed"}]),l=N({notifications:{newMessages:!0,exchangeUpdates:!0,marketingEmails:!1,pushNotifications:!0},privacy:{showLocation:!0,showExchangeHistory:!1,allowDirectMessages:!0},preferences:{theme:"light",language:"English",currency:"USD"}}),d=N(!1),v=N({...e(n)});function R(){E("/dashboard")}function H(){if(e(d)){const t=Cookies.get("SessionId");t&&ks(t,e(v).name,e(v).email,e(v).phone,e(v).location,e(v).bio,i=>{i&&i.success?(C(n,{...e(v)}),console.log("Profile updated successfully")):console.error("Failed to update profile:",i?.error)})}else C(v,{...e(n)});C(d,!e(d))}function J(){C(v,{...e(n)}),C(d,!1)}function L(t,i){x(l,e(l)[t][i]=!e(l)[t][i]);const r=Cookies.get("SessionId");r&&Cs(r,JSON.stringify(e(l)),g=>{g&&g.success?console.log("Settings updated successfully"):console.error("Failed to update settings:",g?.error)})}function $e(){Cookies.remove("SessionId"),Cookies.remove("UserType"),E("/login")}function Oe(){if(confirm("Are you sure you want to delete your account? This action cannot be undone.")){const i=Cookies.get("SessionId");i&&Es(i,r=>{r&&r.success?(Cookies.remove("SessionId"),Cookies.remove("UserType"),alert("Account deleted successfully"),E("/")):alert("Failed to delete account: "+(r?.error||"Unknown error"))})}}function ze(t){E(`/exchange/${t}`)}hs(async()=>{await _e.handleSession(),_e.GetSessionId();const t=_e.SessionId;if(!t){E("/login");return}Ss(t,i=>{i&&i.success&&i.profile?(C(n,{...e(n),...i.profile}),console.log("Profile loaded:",e(n).name)):console.error("Failed to load profile:",i?.error)}),Is(t,i=>{i&&i.success&&i.exchanges?(C(m,i.exchanges),console.log("Exchange history loaded:",e(m).length,"exchanges")):console.error("Failed to load exchange history:",i?.error)})}),qs();var $=Fs();xs("maq4gq",t=>{var i=Us();_s(()=>{ys.title="Profile - NICE Traders"}),y(t,i)});var O=a($),be=a(O),z=o(be,4),We=a(z);{var Ye=t=>{var i=Ds();y(t,i)},Ke=t=>{var i=Ps();y(t,i)};j(We,t=>{e(d)?t(Ye):t(Ke,!1)})}s(z),s(O);var xe=o(O,2),W=a(xe),Y=a(W),K=a(Y),Qe=a(K,!0);s(K);var we=o(K,2),Xe=a(we);{var Ze=t=>{var i=Ms();y(t,i)};j(Xe,t=>{e(n).verificationStatus==="verified"&&t(Ze)})}s(we),s(Y);var Se=o(Y,2),es=a(Se);{var ss=t=>{var i=Ls(),r=G(i);S(r);var g=o(r,2);bs(g);var p=o(g,2);S(p);var h=o(p,2),u=a(h),b=o(u,2);s(h),B(r,()=>e(v).name,w=>x(v,e(v).name=w)),B(g,()=>e(v).bio,w=>x(v,e(v).bio=w)),B(p,()=>e(v).location,w=>x(v,e(v).location=w)),f("click",u,H),f("click",b,J),y(t,i)},as=t=>{var i=Ts(),r=G(i),g=a(r,!0);s(r);var p=o(r,2),h=a(p,!0);s(p);var u=o(p,2),b=a(u),w=o(a(b),2),T=a(w,!0);s(w),s(b);var F=o(b,2),D=o(a(F),2),A=a(D);s(D),s(F),s(u),P(()=>{q(g,e(n).name),q(h,e(n).bio),q(T,e(n).location),q(A,`Member since ${e(n).joinDate??""}`)}),y(t,i)};j(es,t=>{e(d)?t(ss):t(as,!1)})}s(Se),s(W);var Q=o(W,2),ke=o(a(Q),2),X=a(ke),Z=a(X),ts=a(Z,!0);s(Z);var Ie=o(Z,4);he(Ie,4,()=>Array(5),ue,(t,i,r)=>{var g=As();P(p=>fe(g,1,`star ${p??""}`,"svelte-maq4gq"),[()=>r<Math.floor(e(n).rating)?"filled":""]),y(t,g)}),s(Ie),s(X);var ee=o(X,2),Ce=a(ee),is=a(Ce,!0);s(Ce),I(2),s(ee);var Ee=o(ee,2),Ue=a(Ee),os=a(Ue);s(Ue),I(2),s(Ee),s(ke),s(Q);var se=o(Q,2),ns=a(se);s(se);var ae=o(se,2),De=o(a(ae),2),ls=a(De);{var rs=t=>{var i=Ns(),r=G(i),g=o(a(r),2);S(g),s(r);var p=o(r,2),h=o(a(p),2);S(h),s(p),B(g,()=>e(v).email,u=>x(v,e(v).email=u)),B(h,()=>e(v).phone,u=>x(v,e(v).phone=u)),y(t,i)},cs=t=>{var i=Vs(),r=G(i),g=o(a(r),2),p=a(g,!0);s(g),s(r);var h=o(r,2),u=o(a(h),2),b=a(u,!0);s(u),s(h),P(()=>{q(p,e(n).email),q(b,e(n).phone)}),y(t,i)};j(ls,t=>{e(d)?t(rs):t(cs,!1)})}s(De),s(ae);var te=o(ae,2),ie=o(a(te),2),oe=o(a(ie),2),Pe=o(a(oe),2),ne=a(Pe);S(ne),I(2),s(Pe),s(oe);var le=o(oe,2),Me=o(a(le),2),re=a(Me);S(re),I(2),s(Me),s(le);var Le=o(le,2),Te=o(a(Le),2),ce=a(Te);S(ce),I(2),s(Te),s(Le),s(ie);var Ae=o(ie,2),ve=o(a(Ae),2),Ne=o(a(ve),2),de=a(Ne);S(de),I(2),s(Ne),s(ve);var Ve=o(ve,2),Be=o(a(Ve),2),ge=a(Be);S(ge),I(2),s(Be),s(Ve),s(Ae),s(te);var pe=o(te,2),me=a(pe),vs=o(a(me),2);s(me);var He=o(me,2);he(He,5,()=>e(m).slice(0,3),ue,(t,i)=>{var r=Hs(),g=a(r),p=a(g),h=a(p),u=a(h,!0);s(h);var b=o(h,2),w=a(b,!0);s(b),s(p);var T=o(p,2),F=a(T);s(T);var D=o(T,2),A=a(D),gs=a(A,!0);s(A);var je=o(A,2),ps=a(je,!0);s(je),s(D);var Re=o(D,2);he(Re,4,()=>Array(5),ue,(qe,Gs,ms)=>{var Je=Bs();P(()=>fe(Je,1,`star ${ms<e(i).rating?"filled":""}`,"svelte-maq4gq")),y(qe,Je)}),s(Re),s(g),I(2),s(r),P(qe=>{q(u,e(i).currency),fe(b,1,`exchange-type ${e(i).type??""}`,"svelte-maq4gq"),q(w,e(i).type),q(F,`$${e(i).amount??""}`),q(gs,e(i).partner),q(ps,qe)},[()=>new Date(e(i).date).toLocaleDateString()]),f("click",r,()=>ze(e(i).id)),y(t,r)}),s(He),s(pe);var Fe=o(pe,2),Ge=a(Fe),ds=o(Ge,2);s(Fe),s(xe),s($),P((t,i)=>{q(Qe,t),q(ts,e(n).rating),q(is,e(n).totalExchanges),q(os,`${i??""}%`)},[()=>e(n).name.split(" ").map(t=>t[0]).join(""),()=>e(n).totalExchanges>0?Math.round(e(n).completedExchanges/e(n).totalExchanges*100):0]),f("click",be,R),f("click",z,H),f("click",ns,()=>E("/exchange-history")),V(ne,()=>e(l).notifications.newMessages,t=>x(l,e(l).notifications.newMessages=t)),f("change",ne,()=>L("notifications","newMessages")),V(re,()=>e(l).notifications.exchangeUpdates,t=>x(l,e(l).notifications.exchangeUpdates=t)),f("change",re,()=>L("notifications","exchangeUpdates")),V(ce,()=>e(l).notifications.pushNotifications,t=>x(l,e(l).notifications.pushNotifications=t)),f("change",ce,()=>L("notifications","pushNotifications")),V(de,()=>e(l).privacy.showLocation,t=>x(l,e(l).privacy.showLocation=t)),f("change",de,()=>L("privacy","showLocation")),V(ge,()=>e(l).privacy.allowDirectMessages,t=>x(l,e(l).privacy.allowDirectMessages=t)),f("change",ge,()=>L("privacy","allowDirectMessages")),f("click",vs,()=>E("/exchange-history")),f("click",Ge,$e),f("click",ds,Oe),y(_,$),fs()}export{Zs as component};
